키워드 필터링 상세 분석
1. 입력 처리
예시:
질문: "지마켓에 물건을 보내려면 어떤 API를 써야 하나요?"
추출된 키워드: ['지마켓', '물건', '보내려면', '어떤', 'api', '써야', '하나요']
2. 문서별 점수 계산
A. 파일명 매칭 (3점)
예시:
질문: "지마켓 API"
파일: gmarket_controller.py → "지마켓" 매칭 → +3점
파일: order_service.py → "api" 매칭 → +3점
B. 제목 매칭 (2점)
예시:
질문: "주문 처리"
제목: "주문 처리 함수" → "주문", "처리" 매칭 → +4점
C. 메타데이터 매칭 (2점)
클래스명 매칭
예시:
질문: "주문 컨트롤러"
클래스: OrderController → "주문", "컨트롤러" 매칭 → +4점
함수명 매칭
예시:
질문: "주문 생성"
함수: create_order → "주문", "생성" 매칭 → +4점
API 엔드포인트 매칭
예시:
질문: "주문 API"
엔드포인트: POST /api/orders → "api", "orders" 매칭 → +4점
테이블명 매칭
예시:
질문: "주문 테이블"
테이블: order_list → "주문" 매칭 → +2점
D. 내용 매칭 (1점)
예시:
질문: "주문 처리"
내용: "주문을 처리하는 함수입니다" → "주문", "처리" 매칭 → +2점
3. 점수 계산 예시
질문: "지마켓에 물건을 보내려면 어떤 API를 써야 하나요?"
키워드: ['지마켓', '물건', '보내려면', '어떤', 'api', '써야', '하나요']
문서 A: gmarket_shipment_controller.py
파일명: "지마켓" 매칭 → +3점
파일명: "물건" 매칭 → +3점
총점: 6점
문서 B: order_api.py
파일명: "api" 매칭 → +3점
내용: "물건을 배송하는" → +1점
총점: 4점
문서 C: product_service.py
내용: "물건을 처리하는" → +1점
총점: 1점
4. 결과 정렬 및 반환
최종 결과: 문서 A(6점) → 문서 B(4점) → 문서 C(1점) 순으로 상위 50개 반환
5. 특징
가중치 시스템: 파일명 > 제목/메타데이터 > 내용 순으로 높은 점수
부분 매칭: 정확한 단어 매칭이 아닌 포함 관계로 검색
대소문자 무시: 모든 비교를 소문자로 변환
토큰 절약: 상위 50개만 GPT에 전달하여 토큰 사용량 최적화
